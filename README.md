```markdown
# Система жалоб для сервера Unturned

Система жалоб позволяет игрокам сообщать о нарушениях и проблемах на сервере, а администраторам - эффективно обрабатывать эти обращения. Документация описывает принципы работы системы и доступные команды для игроков и администраторов.

## Содержание

- [Для игроков](#для-игроков)
  - [Создание жалобы](#создание-жалобы)
  - [Cooldown между жалобами](#cooldown-между-жалобами)
- [Для администраторов](#для-администраторов)
  - [Просмотр жалоб](#просмотр-жалоб)
  - [Обработка жалоб](#обработка-жалоб)
  - [Жизненный цикл жалобы](#жизненный-цикл-жалобы)
  - [Телепортация к месту инцидента](#телепортация-к-месту-инцидента)
  - [Комментирование жалоб](#комментирование-жалоб)
  - [Закрытие жалоб](#закрытие-жалоб)
- [Список всех команд](#список-всех-команд)
- [Статусы жалоб](#статусы-жалоб)
- [Управление разрешениями](#управление-разрешениями)

## Для игроков

### Создание жалобы

Система жалоб позволяет игрокам сообщать о нарушениях правил, читерстве, оскорблениях и других проблемах, которые требуют внимания администрации.

Для создания жалобы используйте команду:
```
/report player <имя_игрока> <причина>
```
или сокращенно:
```
/rep p <имя_игрока> <причина>
```

**Примеры использования:**
```
/report player Cheater123 Использует читы для полета
/rep p BadGuy Оскорбляет игроков в чате
```

После создания жалобы вы получите уведомление с присвоенным номером жалобы. Администрация будет уведомлена о новой жалобе и рассмотрит ее в ближайшее время.

### Cooldown между жалобами

Для предотвращения спама введено ограничение: нельзя подавать жалобу на одного и того же игрока чаще, чем раз в 10 минут. Если вы попытаетесь подать жалобу на игрока, на которого недавно уже жаловались, система сообщит вам об этом.

## Для администраторов

Администраторы имеют доступ к расширенному функционалу системы жалоб, который позволяет эффективно обрабатывать обращения игроков.

### Просмотр жалоб

Для просмотра списка активных жалоб используйте:
```
/report list
```
или сокращенно:
```
/rep l
```

Команда отобразит список всех активных жалоб с указанием их ID, статуса, имен участников и времени создания.

Для просмотра детальной информации о конкретной жалобе используйте:
```
/report view <ID>
```
или сокращенно:
```
/rep v <ID>
```

Эта команда показывает полную информацию о жалобе, включая:
- Причину жалобы
- Имена и SteamID участников
- Дату и время создания
- Текущий статус
- Назначенного модератора (если есть)
- Список комментариев

### Обработка жалоб

Для обработки жалобы рекомендуется следующий алгоритм:
1. Просмотрите список жалоб с помощью `/report list`
2. Изучите детали жалобы через `/report view <ID>`
3. Возьмите жалобу в работу с помощью `/report status <ID> process`
4. Телепортируйтесь к месту инцидента или игроку
5. Добавьте комментарии по мере необходимости
6. Закройте жалобу с указанием результата рассмотрения

### Жизненный цикл жалобы

Жалоба может иметь следующие статусы:
- **Новая** (New) - жалоба только что создана и ожидает рассмотрения
- **В обработке** (InProcess) - жалоба взята в работу администратором
- **Отклонена** (Rejected) - жалоба признана необоснованной
- **Закрыта** (Closed) - жалоба обработана и закрыта

Для изменения статуса жалобы используйте:
```
/report status <ID> <статус>
```

Где статус может быть:
- `new` - изменить статус на "Новая"
- `process` - взять жалобу в обработку
- `rejected` - отклонить жалобу
- `closed` - закрыть жалобу

Пример:
```
/report status 42 process
```

### Телепортация к месту инцидента

Администраторы могут телепортироваться к месту создания жалобы или к игроку, на которого была подана жалоба:

```
/report tp <ID> [location/player]
```
или сокращенно:
```
/rep tp <ID> [l/p]
```

Параметр указывает место телепортации:
- `location` или `l` (по умолчанию) - телепортация к координатам, где была создана жалоба
- `player` или `p` - телепортация к игроку, на которого подана жалоба (если он онлайн)

**Примеры:**
```
/report tp 42 location
/rep tp 42 p
```

При телепортации жалоба автоматически берется в обработку (статус меняется на "В обработке"), и вы назначаетесь ответственным администратором.

### Комментирование жалоб

Администраторы могут добавлять комментарии к жалобам для фиксации промежуточных результатов рассмотрения:

```
/report comment <ID> <текст_комментария>
```
или сокращенно:
```
/rep com <ID> <текст_комментария>
```

**Пример:**
```
/report comment 42 Игрок признал вину и принес извинения
```

### Закрытие жалоб

После завершения рассмотрения жалобу необходимо закрыть с указанием причины:

```
/report close <ID> [причина]
```
или сокращенно:
```
/rep c <ID> [причина]
```

**Примеры:**
```
/report close 42 Игрок нарушил правила сервера, выдан бан на 3 дня
/rep c 42 Жалоба необоснована, доказательств не представлено
```

При закрытии жалобы создатель жалобы (если он онлайн) получит уведомление о результате рассмотрения.

## Список всех команд

### Для всех игроков
| Команда | Сокращение | Описание |
|---------|------------|----------|
| `/report help` | `/rep h` | Показать справку по командам |
| `/report player <игрок> <причина>` | `/rep p <игрок> <причина>` | Создать жалобу на игрока |

### Только для администраторов
| Команда | Сокращение | Описание |
|---------|------------|----------|
| `/report list` | `/rep l` | Список активных жалоб |
| `/report view <ID>` | `/rep v <ID>` | Посмотреть детали жалобы |
| `/report tp <ID> [location/player]` | `/rep tp <ID> [l/p]` | Телепортироваться к месту создания жалобы или к игроку |
| `/report status <ID> <статус>` | `/rep s <ID> <статус>` | Изменить статус жалобы |
| `/report comment <ID> <текст>` | `/rep com <ID> <текст>` | Добавить комментарий к жалобе |
| `/report close <ID> [причина]` | `/rep c <ID> [причина]` | Закрыть жалобу |

## Статусы жалоб

- **Новая** (New) - жалоба ожидает рассмотрения
- **В обработке** (InProcess) - жалоба взята в работу администратором
- **Отклонена** (Rejected) - жалоба признана необоснованной
- **Закрыта** (Closed) - жалоба обработана и закрыта

## Управление разрешениями

Для управления системой жалоб используются следующие разрешения:

- `forge.improvedmechanics.command.report` - базовое разрешение для создания жалоб (для всех игроков)
- `forge.improvedmechanics.reports.manage` - разрешение для администрирования жалоб

Администраторы сервера (isAdmin) автоматически получают все разрешения.

---

**Примечание:** Система автоматически очищает закрытые жалобы старше 30 дней для оптимизации хранения данных.
```
